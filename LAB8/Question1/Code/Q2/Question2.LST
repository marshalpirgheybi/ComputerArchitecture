8051 Assembler           Version 1.00   06/05/121 20:10:59    Page 1
M:\University\Semester 4\Computer Architecture\LAB\Verilog\ComputerArchitecture-1\LAB8\Question1\Code\Q2\Question2.A51



    1 0000              ORG 0
    2 0000 020064               JMP MAIN
    3 000B              ORG 0BH
    4 000B 020094               JMP TIMER0
    5 000E              
    6 000E              
    7 000E              
    8 0064              ORG 100
    9 0064              MAIN:
   10 0064 758921               MOV TMOD,#00100001B             ;TIMER 1 MODE 2, TIMER 0 MODE 1
   11 0067 758DFD               MOV TH1,#-3                     ;9600 BAUD
   12 006A 758CA5               MOV TH0, #0A5H
   13 006D 758AFF               MOV TL0, #0FFH                   ; 65535-23040 == A5FF H
   14 0070 759850               MOV SCON,#50H                   ;REN enable, MODE 1
   15 0073 7800                 MOV R0, #0H
   16 0075 75A882               MOV IE, #10000010B              ; INTERRUPT TIMER 0
   17 0078 75A000               MOV P2, #00H
   18 007B D28E                 SETB TR1                        ;start timer1
   19 007D D28C                 SETB TR0                        ;start timer0
   20 007F              
   21 007F              
   22 007F              HERE:
   23 007F 9000E6               MOV DPTR, #NAME
   24 0082              LOOP:
   25 0082 E4                   CLR A
   26 0083 93                   MOVC A, @A+DPTR
   27 0084 60F9                 JZ HERE
   28 0086 118C                 ACALL TRANS
   29 0088 A3                   INC DPTR
   30 0089 020082               JMP LOOP
   31 008C              
   32 008C              TRANS:
   33 008C F599                 MOV SBUF, A
   34 008E              WAIT: 
   35 008E 3099FD               JNB TI,WAIT
   36 0091 C299                 CLR TI
   37 0093 22                   RET
   38 0094              
   39 0094              
   40 0094              
   41 0094              TIMER0:
   42 0094              
   43 0094 C28C                 CLR TR0
   44 0096 758CA5               MOV TH0, #0A5H
   45 0099 758AFF               MOV TL0, #0FFH                   ; 65535-23040 == A5FF H
   46 009C C0E0                 PUSH ACC
   47 009E 309832               JNB RI, EXIT
   48 00A1              CHECK:
   49 00A1 C2A0                 CLR P2.0
   50 00A3 E599                 MOV A, SBUF
   51 00A5 F590                 MOV P1, A
   52 00A7 C298                 CLR RI
   53 00A9              FIRSTCHECK1:
   54 00A9 B44107               CJNE A, #'A', SECONDCHECK1
   55 00AC 7801                 MOV R0, #1D
   56 00AE 7900                 MOV R1,#0
   57 00B0 0200D3               JMP EXIT
8051 Assembler           Version 1.00   06/05/121 20:10:59    Page 2
M:\University\Semester 4\Computer Architecture\LAB\Verilog\ComputerArchitecture-1\LAB8\Question1\Code\Q2\Question2.A51



   58 00B3              SECONDCHECK1:
   59 00B3 B46107               CJNE A, #'a', FIRSTCHECK2
   60 00B6 7801                 MOV R0, #1D
   61 00B8 7900                 MOV R1,#0
   62 00BA 0200D3               JMP EXIT
   63 00BD              FIRSTCHECK2:
   64 00BD B44D07               CJNE A, #'M', SECONDCHECK2
   65 00C0 7801                 MOV R0, #1D
   66 00C2 7900                 MOV R1,#0
   67 00C4 0200D3               JMP EXIT
   68 00C7              SECONDCHECK2:
   69 00C7 B46D07               CJNE A, #'m', INVALID
   70 00CA 7801                 MOV R0, #1D
   71 00CC 7900                 MOV R1,#0
   72 00CE 0200D3               JMP EXIT
   73 00D1              INVALID:
   74 00D1 7800                 MOV R0, #0D
   75 00D3              
   76 00D3              EXIT:
   77 00D3 E8                   MOV A, R0
   78 00D4 600B                 JZ EXIT1
   79 00D6              
   80 00D6              
   81 00D6              LEDCHECK1:   
   82 00D6 E9                   MOV A, R1
   83 00D7 7002                 JNZ LEDCHECK2
   84 00D9 B2A0                 CPL P2.0
   85 00DB              LEDCHECK2:
   86 00DB 04                   INC A
   87 00DC B41001               CJNE A, #16D, LEDCHECK3
   88 00DF E4                   CLR A
   89 00E0              LEDCHECK3: 
   90 00E0 F9                   MOV R1, A
   91 00E1                      
   92 00E1              EXIT1: 
   93 00E1 D0E0                 POP ACC
   94 00E3 D28C                 SETB TR0   
   95 00E5 32           RETI
   96 00E6              
   97 00E6              
   98 00E6              
   99 00E6 41 6D 69     NAME:    DB 'Amir Marshal, Mehran Montazer, ',0
      00E9 72 20 4D
      00EC 61 72 73
      00EF 68 61 6C
      00F2 2C 20 4D
      00F5 65 68 72
      00F8 61 6E 20
      00FB 4D 6F 6E
      00FE 74 61 7A
      0101 65 72 2C
      0104 20 00
  100 0106              
  101 0106              
  102 0106              
  103 0106              LOOK_UP:                        ; hexadecimal encodings for displaying the digits 0 to F
  104 0106 3F                   DB 3FH                  ; 0
8051 Assembler           Version 1.00   06/05/121 20:10:59    Page 3
M:\University\Semester 4\Computer Architecture\LAB\Verilog\ComputerArchitecture-1\LAB8\Question1\Code\Q2\Question2.A51



  105 0107 06                   DB 06H                  ; 1
  106 0108 5B                   DB 5BH                  ; 2
  107 0109 4F                   DB 4FH                  ; 3
  108 010A 66                   DB 66H                  ; 4
  109 010B 6D                   DB 6DH                  ; 5
  110 010C 7D                   DB 7DH                  ; 6
  111 010D 07                   DB 07H                  ; 7
  112 010E FF                   DB 0FFH                 ; 8
  113 010F 6F                   DB 6FH                  ; 9
  114 0110 77                   DB 77H                  ; A
  115 0111 7C                   DB 7CH                  ; B
  116 0112 39                   DB 39H                  ; C
  117 0113 5E                   DB 5EH                  ; D
  118 0114 79                   DB 79H                  ; E
  119 0115 71                   DB 71H                  ; F
  120 0116 00                   DB 00H                  ; NaN
  121 0117              
  122 0117              END

Defined Symbols:

Defined Labels:
  CHECK                                     0000A1  161
  EXIT                                      0000D3  211
  EXIT1                                     0000E1  225
  FIRSTCHECK1                               0000A9  169
  FIRSTCHECK2                               0000BD  189
  HERE                                      00007F  127
  INVALID                                   0000D1  209
  LEDCHECK1                                 0000D6  214
  LEDCHECK2                                 0000DB  219
  LEDCHECK3                                 0000E0  224
  LOOK_UP                                   000106  262
  LOOP                                      000082  130
  MAIN                                      000064  100
  NAME                                      0000E6  230
  SECONDCHECK1                              0000B3  179
  SECONDCHECK2                              0000C7  199
  TIMER0                                    000094  148
  TRANS                                     00008C  140
  WAIT                                      00008E  142
